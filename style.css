/* フォント読み込み */
@import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@500;800&family=Yuji+Syuku&family=Shippori+Mincho:wght@800&family=RocknRoll+One&display=swap');

body { font-family: 'M PLUS Rounded 1c', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #4158D0, #C850C0, #FFCC70); background-size: 400% 400%; animation: gradientBG 15s ease infinite; color: #f0f0f0; margin: 0; min-height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden; position: relative;}
@keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

/* ===== 画面共通 ===== */
.screen { display: none; width: 100%; min-height: 100vh; box-sizing: border-box; position: relative; overflow: hidden; }
.screen.active { display: flex; animation: fadeIn 0.5s ease-out; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* キラキラ背景 */
.stars, .twinkling { position:absolute; top:0; left:0; right:0; bottom:0; width:100%; height:100%; display:block; z-index: 0; }
.stars { background:#000 url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAABlBMVEVVVP////8vZtJdAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAFUlEQVQ4y2NgoBpgImBqBNAyAMgwAAD70w43s4RL4wAAAABJRU5ErkJggg==) repeat top center; background-size: auto; opacity: 0.5; }
.twinkling{ background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADIAQMAAACXljzdAAAABlBMVEVVVP////8vZtJdAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAHUlEQVQ4y2NgoBpgImBqBNAyAMgwgM0IFJsKANqnHbcY5t6dAAAAAElFTkSuQmCC) repeat top center; background-size: auto; animation: move-twink-back 200s linear infinite; opacity: 0.3; }
@keyframes move-twink-back { from {background-position:0 0;} to {background-position:-10000px 5000px;} }


/* ===== タイトル & リザルト画面 ===== */
#title-screen, #result-screen { flex-direction: column; justify-content: center; align-items: center; text-align: center; z-index: 1;}
.title-content, .result-content { background-color: rgba(30, 30, 50, 0.85); padding: 40px 60px; border-radius: 20px; box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6); border: 1px solid rgba(255, 255, 255, 0.1); position: relative; z-index: 2; }
.game-title { background: linear-gradient(45deg, #ffeb3b, #ffcc70); -webkit-background-clip: text; background-clip: text; color: transparent; font-size: 4.2em; font-weight: 800; margin-bottom: 35px; text-shadow: 3px 3px 10px rgba(0,0,0,0.8); animation: pulse 2s infinite ease-in-out; font-family: 'Yuji Syuku', serif; }
@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.03); } }
.difficulty-selector { margin-bottom: 30px; } .difficulty-selector p { margin-bottom: 15px; font-size: 1.2em; color: #ddd; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); }
.difficulty-button { padding: 10px 22px; font-size: 1.1em; margin: 0 8px; cursor: pointer; border: none; border-radius: 20px; background-color: rgba(255, 255, 255, 0.1); color: #eee; transition: all 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
.difficulty-button:hover { background-color: rgba(255, 255, 255, 0.2); transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.4); }
.difficulty-button.selected { background: linear-gradient(45deg, #ffeb3b, #ffc107); color: #333; font-weight: bold; box-shadow: 0 4px 10px rgba(255, 200, 0, 0.5); }
#start-game-button { padding: 14px 35px; font-size: 1.4em; cursor: pointer; background: linear-gradient(45deg, #C850C0, #ffcc70); border: none; border-radius: 25px; color: white; font-weight: bold; transition: all 0.3s ease; text-shadow: 1px 1px 3px rgba(0,0,0,0.4); box-shadow: 0 5px 15px rgba(200, 80, 192, 0.4); }
#start-game-button:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(200, 80, 192, 0.6); }
.button-pop { transition: transform 0.1s ease, box-shadow 0.2s ease; } .button-pop:active:not(:disabled) { transform: scale(0.95); }

/* ===== ゲーム画面 ===== */
#game-screen { justify-content: space-evenly; align-items: flex-start; padding: 25px 15px; background-color: rgba(0, 0, 0, 0.2); z-index: 1; }
.sidebar { width: 230px; padding: 20px; background-color: rgba(40, 40, 60, 0.75); border-radius: 15px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4); align-self: stretch; border: 1px solid rgba(255, 255, 255, 0.1); display: flex; flex-direction: column;}
.sidebar h2 { margin-top: 0; color: #ffcc70; border-bottom: 1px solid rgba(255, 255, 255, 0.2); padding-bottom: 10px; margin-bottom: 15px; text-align: center; font-weight: 500; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); }
#left-sidebar ul { padding-left: 15px; margin: 0; font-size: 0.88em; line-height: 1.6; color: #ccc; flex-grow: 1; } #left-sidebar li { margin-bottom: 7px; } #left-sidebar strong { color: #f0ad4e; font-weight: bold; }
#game-coin-info { margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.2); text-align: center; }
#game-coin-info h3 { margin: 0 0 5px 0; font-size: 1em; color: #ffcc70; font-weight: 500; }
#game-coin-display { font-size: 1.2em; font-weight: bold; color: #ffeb3b; }

#right-sidebar dl { margin: 0; font-size: 0.88em; } #right-sidebar dt { font-weight: bold; color: #ffeb3b; margin-top: 12px; text-shadow: 1px 1px 2px rgba(0,0,0,0.4); } #right-sidebar dd { margin-left: 15px; margin-bottom: 8px; line-height: 1.4; color: #ccc; } #right-sidebar strong { font-weight: bold; } .payout-win { color: #ff9800; } .payout-lose { color: #e91e63; }
#game-container { background-color: rgba(45, 45, 70, 0.8); padding: 25px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5); text-align: center; width: 100%; max-width: 720px; margin: 0 15px; display: flex; flex-direction: column; min-height: 620px; border: 1px solid rgba(255, 255, 255, 0.1); }
#wave-info { margin-bottom: 5px; font-size: 1.1em; color: #ccc; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); } #difficulty-display { font-weight: bold; color: #ffcc70; }
#consecutive-wins-display { color: #ffeb3b; font-weight: bold; margin-left: 10px; font-size: 0.9em; animation: pulseYellow 1.5s infinite ease-in-out; }
@keyframes pulseYellow { 0%, 100% { opacity: 1; text-shadow: 0 0 5px #ffeb3b; } 50% { opacity: 0.7; text-shadow: none; } }
#current-bet-info { background-color: rgba(0, 0, 0, 0.3); padding: 5px 10px; border-radius: 5px; font-size: 1.1em; text-shadow: 1px 1px 2px rgba(0,0,0,0.6); border: 1px solid rgba(255, 235, 59, 0.3); box-shadow: inset 0 0 5px rgba(0,0,0,0.2); min-height: 1.5em; margin-bottom: 15px; font-weight: bold; color: #ffeb3b; }
#current-bet-info .parent-name { font-weight: normal; color: #eee; }

#game-area { display: flex; justify-content: space-between; align-items: stretch; margin-bottom: 25px; gap: 20px; flex-grow: 1; }
.player-box { background-color: rgba(60, 60, 90, 0.85); padding: 18px; border-radius: 10px; width: 210px; box-sizing: border-box; display: flex; flex-direction: column; border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: inset 0 0 10px rgba(0,0,0,0.3); position: relative; }
.player-box h2 { margin-top: 0; margin-bottom: 12px; color: #eee; font-size: 1.3em; border-bottom: 1px solid rgba(255, 255, 255, 0.2); padding-bottom: 8px; font-weight: 500; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); }
.parent-marker { color: #ffeb3b; font-size: 0.8em; margin-left: 5px; vertical-align: middle; font-weight: bold; display: none; text-shadow: 0 0 3px #ffc107; }

.player-box p { margin: 10px 0; font-size: 1em; color: #ddd; } .player-box span { font-weight: bold; }
.score-container { position: relative; } .score { color: #ffeb3b; font-size: 1.1em; }
#player-dice, #npc-dice { font-family: monospace; font-size: 1.2em; color: #fff; }
.hand-display { color: #ffcc70; font-weight: 800; display: inline-block; transition: transform 0.3s ease, color 0.3s ease; text-shadow: 1px 1px 4px rgba(0,0,0,0.6); }
.hand-display.highlight { animation: handHighlight 0.8s ease-out forwards; }
.hand-display.highlight.hifumi { animation: handHighlightHifumi 1s ease-in-out forwards; }
.hand-display.highlight.strong { animation: handHighlightStrong 1.2s ease-out forwards; }
.hand-display.highlight.legendary { animation: handHighlightLegendary 1.5s ease-out forwards; }
@keyframes handHighlight { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.3); color: #ffeb3b; } 100% { transform: scale(1); } }
@keyframes handHighlightHifumi { 0% { transform: scale(1) rotate(0deg); color: #ffcc70; filter: grayscale(0) brightness(1); } 30% { transform: scale(0.9) rotate(3deg); color: #add8e6; filter: grayscale(0.6) brightness(0.9); } 70% { transform: scale(0.95) rotate(-3deg); } 100% { transform: scale(1) rotate(0deg); color: #ffcc70; filter: grayscale(0) brightness(1); } }
@keyframes handHighlightStrong { 0% { transform: scale(1) rotate(0deg); text-shadow: 1px 1px 4px rgba(0,0,0,0.6); filter: brightness(1); } 25% { transform: scale(1.5) rotate(-5deg); color: #ffeb3b; text-shadow: 0 0 12px #ffc107; filter: brightness(1.2); } 50% { filter: brightness(1.4); transform: scale(1.45); } 75% { transform: scale(1.4) rotate(5deg); filter: brightness(1.3); } 100% { transform: scale(1) rotate(0deg); text-shadow: 1px 1px 4px rgba(0,0,0,0.6); filter: brightness(1); } }
@keyframes handHighlightLegendary { 0% { transform: scale(1); filter: brightness(1) drop-shadow(0 0 0px gold); } 15% { transform: scale(1.8) rotate(-7deg); filter: brightness(2.5) drop-shadow(0 0 20px gold); color: gold; } 30% { transform: scale(1.7) rotate(7deg); filter: brightness(1.8) drop-shadow(0 0 30px gold); } 45% { transform: scale(1.75) rotate(-5deg); filter: brightness(2.2) drop-shadow(0 0 25px gold); } 60% { transform: scale(1.7) rotate(5deg); filter: brightness(2.0) drop-shadow(0 0 22px gold); } 100% { transform: scale(1); filter: brightness(1) drop-shadow(0 0 0px gold); } }

#dice-area { flex-grow: 1; text-align: center; padding: 25px; background-color: rgba(70, 70, 100, 0.85); border-radius: 12px; display: flex; flex-direction: column; justify-content: center; align-items: center; border: 3px solid rgba(255, 255, 255, 0.2); overflow: visible; box-shadow: inset 0 0 15px rgba(0,0,0,0.4); position: relative; width: calc(100% - 480px); max-width: 320px; margin: 0 auto; }
#dice-display { font-size: 5em; font-weight: 800; margin: 15px 0; color: #ffffff; min-height: 1.2em; letter-spacing: 0.15em; font-family: 'M PLUS Rounded 1c', sans-serif; text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.6); white-space: nowrap; transition: transform 0.1s ease-out; }
#dice-display .dice-num { display: inline-block; margin: 0 0.05em; }
#dice-display.rolling .dice-num { color: #bbb; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4); }
#dice-display.settled .dice-num { animation: diceSettle 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
@keyframes diceSettle { 0% { transform: scale(1.1) rotate(-2deg); } 60% { transform: scale(0.97) rotate(2deg); } 100% { transform: scale(1); } }
.roll-counter-top-right { position: absolute; top: 10px; right: 15px; font-size: 0.9em; color: rgba(255, 255, 255, 0.6); background-color: rgba(0, 0, 0, 0.3); padding: 2px 6px; border-radius: 4px; z-index: 5; }
#message-area { background-color: rgba(30, 30, 50, 0.75); padding: 12px; margin-bottom: 15px; border-radius: 8px; min-height: 3em; display: flex; justify-content: center; align-items: center; border: 1px solid rgba(255, 255, 255, 0.1); }
#message { margin: 0; font-style: italic; color: #a0ffa0; font-size: 1.1em; font-weight: 500; text-shadow: 1px 1px 2px rgba(0,0,0,0.6); }

/* 中央アナウンス */
.center-role { position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%); font-size: 6em; font-weight: 800; color: white; text-shadow: 3px 3px 0 #444, 6px 6px 10px rgba(0, 0, 0, 0.7); opacity: 0; pointer-events: none; z-index: 20; white-space: nowrap; padding: 0.1em 0.5em; border-radius: 10px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5); width: auto; max-width: 90%; background-color: rgba(20, 20, 30, 0.7); transition: background-color 0.3s ease; }
.center-role.role-appear { animation: centerRoleAppear 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards, centerRoleFadeOut 0.5s ease-out forwards var(--center-role-duration, 2s); }
@keyframes centerRoleAppear { 0% { transform: translate(-50%, -50%) scale(0.5) rotate(-5deg); opacity: 0; } 100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 1; } }
@keyframes centerRoleFadeOut { 0% { opacity: 1; } 100% { opacity: 0; } }
.center-role.role-pinzoro { font-family: 'Shippori Mincho', serif; font-size: 8em; color: gold; text-shadow: 0 0 10px white, 0 0 20px gold, 3px 3px 5px rgba(0,0,0,0.6); filter: drop-shadow(0 0 10px gold); animation-name: centerRolePinzoro, centerRoleFadeOut; animation-duration: 0.6s, 0.5s; animation-timing-function: cubic-bezier(0.68, -0.6, 0.27, 1.55), ease-out; animation-fill-mode: forwards, forwards; animation-delay: 0s, 2.5s; padding: 0.2em 0.6em; background-color: rgba(70, 50, 0, 0.8); }
@keyframes centerRolePinzoro { 0% { transform: translate(-50%, -50%) scale(3) rotateY(180deg); opacity: 0; } 100% { transform: translate(-50%, -50%) scale(1) rotateY(0deg); opacity: 1; } }
.center-role.role-arashi { font-family: 'RocknRoll One', sans-serif; font-size: 7.5em; color: #ffcc80; text-shadow: 0 0 8px #ff5722, 3px 3px 6px rgba(0, 0, 0, 0.7); animation-name: centerRoleArashi, centerRoleFadeOut; animation-duration: 0.5s, 0.5s; animation-timing-function: cubic-bezier(0.68, -0.6, 0.27, 1.55), ease-out; animation-fill-mode: forwards, forwards; animation-delay: 0s, 2.2s; padding: 0.15em 0.5em; background-color: rgba(80, 20, 0, 0.8); }
@keyframes centerRoleArashi { 0% { transform: translate(-50%, -50%) scale(0) rotate(720deg); opacity: 0; filter: blur(8px); } 100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 1; filter: blur(0px); } }
.center-role.role-shigoro { font-family: 'Yuji Syuku', serif; font-size: 7em; color: #ffe082; text-shadow: 2px 2px 4px rgba(0,0,0,0.8), 0 0 5px #ff9800; --center-role-duration: 2s; padding: 0.1em 0.4em; background-color: rgba(80, 50, 0, 0.8); }
.center-role.role-normal-eye { font-family: 'M PLUS Rounded 1c', sans-serif; font-size: 6em; color: #eee; text-shadow: 2px 2px 5px rgba(0,0,0,0.5); --center-role-duration: 1.5s; background-color: rgba(40, 40, 80, 0.7); }
.center-role.role-hifumi { font-family: 'Yuji Syuku', serif; font-size: 6.5em; color: #cdeaff; text-shadow: 1px 1px 4px rgba(0,0,0,0.7), 0 0 5px #5882b4; animation-name: centerRoleHifumi, centerRoleFadeOut; animation-duration: 0.8s, 0.5s; animation-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1), ease-out; animation-fill-mode: forwards, forwards; animation-delay: 0s, 1.8s; background-color: rgba(30, 40, 70, 0.8); }
@keyframes centerRoleHifumi { 0% { transform: translate(-50%, -50%) translateY(30px) rotate(-15deg); opacity: 0; } 100% { transform: translate(-50%, -50%) translateY(0) rotate(0deg); opacity: 1; } }
.center-role.role-shonben { font-family: 'M PLUS Rounded 1c', sans-serif; font-size: 4.8em; color: #bbb; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); --center-role-duration: 1.5s; background-color: rgba(50, 50, 50, 0.75); }

/* ゲーム画面手札表示エリア */
#player-hand-area { display: flex; justify-content: center; align-items: center; gap: 8px; margin-bottom: 15px; min-height: 50px; flex-wrap: wrap; padding: 5px; background-color: rgba(0, 0, 0, 0.15); border-radius: 8px; }
.hand-card-display { background-color: rgba(60, 60, 90, 0.8); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 6px 10px; font-size: 0.85em; color: #eee; cursor: default; transition: all 0.2s ease; white-space: nowrap; display: inline-flex; align-items: baseline; gap: 5px; box-shadow: 1px 1px 3px rgba(0,0,0,0.3); }
.hand-card-name { font-weight: bold; }
.hand-card-uses { font-size: 0.85em; color: #bbb; }
.hand-card-display.type-support { background-color: rgba(60, 90, 150, 0.8); border-color: rgba(100, 160, 230, 0.5); }
.hand-card-display.type-dice { background-color: rgba(180, 70, 70, 0.8); border-color: rgba(230, 110, 110, 0.5); }
.hand-card-display.type-score { background-color: rgba(50, 130, 80, 0.8); border-color: rgba(80, 180, 110, 0.5); }
.hand-card-display.usable { cursor: pointer; filter: brightness(1.2); box-shadow: 0 0 8px cyan; border-color: cyan; }
.hand-card-display.usable:hover { filter: brightness(1.3); transform: translateY(-2px); }
.hand-card-display.used { opacity: 0.5; background-color: rgba(80, 80, 80, 0.8) !important; border-color: rgba(150, 150, 150, 0.5) !important; box-shadow: none; cursor: not-allowed; }
.hand-card-display.passive { /* border-style: dashed; */ }

#control-area { display: flex; flex-direction: column; align-items: stretch; gap: 15px; margin-top: auto; }
#bet-controls { display: flex; align-items: center; justify-content: center; gap: 10px; flex-wrap: wrap; transition: opacity 0.3s ease, visibility 0.3s ease; padding: 10px; background-color: rgba(0,0,0,0.15); border-radius: 10px; }
.bet-adjust-container { display: flex; gap: 5px; }
.bet-input-container { display: flex; flex-direction: column; align-items: center; gap: 2px; }
.bet-input-container label { font-size: 0.9em; color: #ccc; }
.bet-action-container { display: flex; gap: 10px; align-items: stretch; }
#game-screen.npc-parent #bet-controls { opacity: 0.5; pointer-events: none; }
#game-screen.npc-parent #bet-controls .bet-adjust-container, #game-screen.npc-parent #bet-controls .bet-action-container { display: none; }
.bet-adjust-button { padding: 8px 14px; font-size: 1.1em; min-width: 55px; border-radius: 18px; color: white; font-weight: bold; transition: transform 0.1s ease, box-shadow 0.2s ease, background 0.2s ease; box-shadow: 0 3px 6px rgba(0,0,0,0.3); }
.bet-adjust-button.plus { background: linear-gradient(180deg, #5cb85c, #4cae4c); }
.bet-adjust-button.plus:hover:not(:disabled) { background: linear-gradient(180deg, #6cd96c, #5bc85b); }
.bet-adjust-button.minus { background: linear-gradient(180deg, #d9534f, #c9302c); }
.bet-adjust-button.minus:hover:not(:disabled) { background: linear-gradient(180deg, #e06b67, #d6403b); }
#max-bet-button { padding: 10px 20px; font-size: 1.1em; border-radius: 20px; background: linear-gradient(180deg, #f0ad4e, #ec971f); color: white; font-weight: bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.4); }
#max-bet-button:hover:not(:disabled) { background: linear-gradient(180deg, #f3bc70, #f0a540); transform: translateY(-2px); box-shadow: 0 5px 10px rgba(236, 151, 31, 0.4); }
#set-bet-button { padding: 10px 20px; font-size: 1.1em; border-radius: 20px; background: linear-gradient(180deg, #ffeb3b, #ffc107); color: #333; font-weight: bold; }
#set-bet-button:hover:not(:disabled) { background: linear-gradient(180deg, #fff06b, #ffd24d); transform: translateY(-2px); box-shadow: 0 5px 10px rgba(255, 200, 0, 0.4); }
#bet-input { padding: 10px; font-size: 1.2em; width: 90px; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 10px; background-color: rgba(255, 255, 255, 0.1); color: #fff; text-align: center; box-shadow: inset 0 2px 4px rgba(0,0,0,0.3); }
#bet-input:focus { background-color: rgba(255, 255, 255, 0.2); outline: 2px solid #ffeb3b; }
#bet-input:disabled { background-color: rgba(80, 80, 80, 0.5); color: #aaa; cursor: not-allowed; }
#min-bet-display { margin-left: 0; color: #ffcc70; font-size: 0.85em; font-weight: bold; align-self: center; }

#action-controls { display: flex; justify-content: center; gap: 15px; }
#next-wave-area { display: flex; justify-content: center; }

button { padding: 10px 18px; font-size: 1em; cursor: pointer; border: none; border-radius: 20px; color: #333; font-weight: bold; transition: all 0.2s ease; text-shadow: 0px 1px 1px rgba(255,255,255,0.3); box-shadow: 0 3px 5px rgba(0,0,0,0.3); }
button:disabled { background-color: #555 !important; background-image: none !important; color: #999 !important; cursor: not-allowed; box-shadow: inset 0 2px 4px rgba(0,0,0,0.4); text-shadow: none;}
#roll-button, #next-wave-button, #restart-same-difficulty-button { background: linear-gradient(180deg, #ffeb3b, #ffc107); }
#roll-button:hover:not(:disabled), #next-wave-button:hover:not(:disabled), #restart-same-difficulty-button:hover { transform: translateY(-2px); box-shadow: 0 5px 10px rgba(255, 200, 0, 0.4); }
.button-subtle, #change-difficulty-button, #history-button { background: linear-gradient(180deg, #8a94a8, #6c757d); color: white; text-shadow: 0px -1px 1px rgba(0,0,0,0.4); }
.button-subtle:hover:not(:disabled), #change-difficulty-button:hover, #history-button:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 5px 10px rgba(108, 117, 125, 0.4); }

.score-change-popup { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); font-size: 1.3em; font-weight: bold; padding: 2px 8px; border-radius: 5px; z-index: 10; pointer-events: none; opacity: 0; white-space: nowrap; animation: scorePopup 1.5s ease-out forwards; }
.score-change-popup.gain { color: #fff; background-color: rgba(40, 167, 69, 0.9); text-shadow: 0 0 3px #000; }
.score-change-popup.loss { color: #fff; background-color: rgba(220, 53, 69, 0.9); text-shadow: 0 0 3px #000; }
@keyframes scorePopup { 0% { transform: translate(-50%, 0) scale(0.8); opacity: 1; } 80% { transform: translate(-50%, -35px) scale(1.1); opacity: 1; } 100% { transform: translate(-50%, -45px) scale(1); opacity: 0; } }

.result-content { background-color: rgba(30, 30, 50, 0.9); min-width: 400px; }
#result-title { font-size: 3em; margin-bottom: 20px; font-weight: 800; text-shadow: 2px 2px 6px rgba(0,0,0,0.6); } #result-title.clear { color: #90ee90; } #result-title.over { color: #ff7b7b; }
#result-message, #final-score { font-size: 1.3em; margin-bottom: 15px; color: #ddd; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); } #final-score { font-weight: bold; color: #ffeb3b; }
.result-actions { margin-top: 30px; display: flex; justify-content: space-around; gap: 15px; }
#restart-same-difficulty-button { background: linear-gradient(180deg, #90ee90, #28a745); color: #333; } #restart-same-difficulty-button:hover { transform: translateY(-2px); box-shadow: 0 5px 10px rgba(40, 167, 69, 0.4); }

/* ===== モーダル共通 ===== */
.modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.8); padding-top: 60px; backdrop-filter: blur(5px); }
.modal-content { background-color: #2a2a3a; margin: 5% auto; padding: 30px; border: 1px solid rgba(255, 255, 255, 0.1); width: 85%; max-width: 650px; border-radius: 15px; position: relative; box-shadow: 0 8px 25px rgba(0,0,0,0.6); animation: slideDown 0.4s ease-out; }
@keyframes slideDown { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
.close-button { color: #aaa; position: absolute; top: 15px; right: 25px; font-size: 32px; font-weight: bold; cursor: pointer; transition: color 0.2s ease; } .close-button:hover, .close-button:focus { color: #fff; }
.modal h2 { margin-top: 0; color: #ffcc70; text-align: center; border-bottom: 1px solid rgba(255, 255, 255, 0.2); padding-bottom: 10px; font-weight: 500; text-shadow: 1px 1px 3px rgba(0,0,0,0.5);}
#history-log { list-style: none; padding: 0; max-height: 65vh; overflow-y: auto; margin-top: 20px; }
#history-log li { background-color: rgba(70, 70, 100, 0.6); margin-bottom: 10px; padding: 12px 18px; border-radius: 8px; border-left: 6px solid #666; font-size: 0.95em; transition: background-color 0.2s ease; }
#history-log li:hover { background-color: rgba(85, 85, 115, 0.7); }
#history-log li.win { border-left-color: #90ee90; } #history-log li.lose { border-left-color: #ff7b7b; } #history-log li.draw { border-left-color: #aaa; }
#history-log .wave-num { font-weight: bold; color: #ffcc70; display: block; margin-bottom: 6px; }
#history-log .details { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 5px;} #history-log .player, #history-log .npc { font-family: monospace; color: #eee; } #history-log .vs { margin: 0 10px; font-weight: bold; color: #ccc; } #history-log .hand { font-size: 0.9em; color: #bbb; margin-left: 5px; font-style: italic;}
#history-log .score-change-history { font-size: 0.9em; text-align: right; margin-top: 4px; }
#history-log .score-change-history .gain { color: #90ee90; font-weight: bold; }
#history-log .score-change-history .loss { color: #ff7b7b; font-weight: bold; }
#history-log .win-streak { color: #ffeb3b; font-weight: bold; font-style: italic; margin-left: 5px; }
#history-log .parent-info { font-size: 0.85em; color: #ccc; margin-left: 8px; font-weight: normal; }

/* ===== ショップ画面専用スタイル ===== */
#shop-screen { flex-direction: column; justify-content: flex-start; align-items: center; padding: 20px; box-sizing: border-box; z-index: 1; overflow-y: auto; }
.shop-content { background-color: rgba(40, 40, 60, 0.9); padding: 30px 40px; border-radius: 15px; box-shadow: 0 6px 25px rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.1); width: 100%; max-width: 1000px; text-align: center; position: relative; animation: fadeInShop 0.5s ease-out; z-index: 2; margin-top: 20px; margin-bottom: 20px; }
@keyframes fadeInShop { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
.shop-title { color: #ffcc70; margin-top: 0; margin-bottom: 15px; font-size: 2.2em; font-family: 'Yuji Syuku', serif; text-shadow: 2px 2px 5px rgba(0,0,0,0.6); }
#player-status { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; background-color: rgba(0,0,0,0.2); padding: 10px 15px; border-radius: 8px; }
#coin-display { font-size: 1.2em; color: #ffeb3b; font-weight: bold; text-shadow: 1px 1px 3px rgba(0,0,0,0.5); text-align: left; }
#coin-display #player-coins { font-size: 1.2em; }
#shop-player-hand { font-size: 0.9em; color: #ccc; text-align: right; max-width: 60%; }
#hand-cards { list-style: none; padding: 0; margin: 5px 0 0 0; display: flex; flex-wrap: wrap; justify-content: flex-end; gap: 5px; }
.hand-card-item { background-color: rgba(255, 255, 255, 0.1); padding: 3px 8px; border-radius: 10px; font-size: 0.9em; white-space: nowrap; cursor: default; display: flex; align-items: center; gap: 8px; }
.sell-card-button { background-color: rgba(220, 53, 69, 0.7); color: #eee; border: none; border-radius: 10px; padding: 2px 6px; font-size: 0.8em; font-weight: bold; cursor: pointer; transition: background-color 0.2s ease; }
.sell-card-button:hover { background-color: rgba(220, 53, 69, 0.9); }
.sell-card-button:disabled { background-color: #555 !important; color: #999 !important; cursor: not-allowed; }

.shop-message { font-size: 1em; color: #ccc; margin-bottom: 30px; min-height: 1.2em; }
#card-offers { display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; margin-bottom: 35px; align-items: flex-start; }
/* ショップカード要素調整 */
.card { border: 1px solid rgba(255, 255, 255, 0.15); border-radius: 10px; padding: 15px 15px 50px 15px; width: 200px; min-height: 280px; box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.4), inset 0 0 5px rgba(0,0,0,0.2); display: flex; flex-direction: column; transition: transform 0.2s ease, box-shadow 0.2s ease; position: relative; overflow: hidden; background-size: cover; background-position: center center; background-repeat: no-repeat; background-color: rgba(60, 60, 90, 0.8); }
.card:not(.sold-out):hover { transform: translateY(-6px) scale(1.03); box-shadow: 5px 10px 15px rgba(0, 0, 0, 0.5), inset 0 0 8px rgba(0,0,0,0.3); }
.card-type-badge { position: absolute; top: 0; left: 0; padding: 3px 10px; font-size: 0.8em; font-weight: bold; border-radius: 10px 0 10px 0; color: #fff; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); z-index: 1; }
.card-rarity-badge { position: absolute; top: 0; right: 0; padding: 3px 10px; font-size: 0.8em; font-weight: bold; border-radius: 0 10px 0 10px; color: #fff; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); z-index: 1; }
.card.rarity-normal .card-rarity-badge { background-color: #9e9e9e; }
.card.rarity-rare .card-rarity-badge { background-color: #4a90e2; }
.card.rarity-epic .card-rarity-badge { background-color: #9c27b0; }
.card.rarity-legendary .card-rarity-badge { background-color: #ff9800; }
.card.type-support .card-type-badge { background-color: #4a90e2; }
.card.type-dice .card-type-badge { background-color: #e65252; }
.card.type-score .card-type-badge { background-color: #28a745; }
/* カード名スタイル調整 */
.card-name { font-size: 1.2em; color: #ffeb3b; margin-top: 15px; margin-bottom: 8px; font-weight: 800; text-shadow: 1px 1px 3px rgba(0,0,0,0.6); background-color: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 255, 255, 0.2); padding: 5px 10px; border-radius: 8px; display: inline-block; /* margin-left/right auto 削除 */ line-height: 1.3; text-align: center; /* ★ 中央揃えに戻す場合 */ }
.card-name .card-level { display: block; font-size: 0.8em; color: #ffcc70; font-weight: normal; }
/* 強化レベル表示の色 */
.card-level-value-2 { color: #90ee90; text-shadow: 0 0 3px #28a745; font-weight: bold;}
.card-level-value-3 { color: #ff8c00; text-shadow: 0 0 5px #ffeb3b; font-weight: bold;}
/* カード説明文スタイル調整 */
.card-description { font-size: 0.9em; color: #e8e8e8; line-height: 1.5; text-align: left; /* ★ 左寄せ */ margin-bottom: 10px; flex-grow: 1; position: relative; z-index: 0; text-shadow: 1px 1px 2px rgba(0,0,0,0.9), -1px -1px 2px rgba(0,0,0,0.9), 1px -1px 2px rgba(0,0,0,0.9), -1px 1px 2px rgba(0,0,0,0.9); background-color: rgba(0, 0, 0, 0.5); padding: 8px; border-radius: 5px; box-sizing: border-box; }
/* カードフッター (金額とボタン) の位置調整 */
.card-footer { position: absolute; bottom: 10px; left: 10px; right: 10px; display: flex; justify-content: space-between; align-items: center; padding-top: 0; border-top: none; }
/* 金額表示のボタン風スタイル */
.card-cost { font-size: 1.0em; font-weight: bold; color: #ffcc70; background-color: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 255, 255, 0.2); padding: 6px 12px; border-radius: 15px; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
.card-cost::after { display: none; } /* " G"削除 */
.card.upgradeable.max-level .card-cost { color: #aaa; font-style: italic; font-weight: normal; background-color: rgba(50, 50, 50, 0.4); border-color: rgba(150, 150, 150, 0.4); }
.card.upgradeable.max-level .card-cost::after { display: none; }

.buy-button { padding: 6px 14px; font-size: 0.9em; cursor: pointer; border: none; border-radius: 15px; color: #333; font-weight: bold; transition: all 0.2s ease; text-shadow: 0px 1px 1px rgba(255,255,255,0.3); box-shadow: 0 2px 4px rgba(0,0,0,0.3); background: linear-gradient(180deg, #ffeb3b, #ffc107); }
.buy-button:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(255, 200, 0, 0.4); }
.buy-button:disabled { background-color: #555 !important; background-image: none !important; color: #999 !important; cursor: not-allowed; box-shadow: inset 0 2px 4px rgba(0,0,0,0.4); text-shadow: none; }
.shop-actions { display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); }
#reroll-button { padding: 8px 18px; font-size: 1em; background: linear-gradient(180deg, #5bc0de, #31b0d5); color: white; }
#reroll-button:hover:not(:disabled) { background: linear-gradient(180deg, #70cce6, #4ac0e0); transform: translateY(-1px); box-shadow: 0 3px 6px rgba(0,0,0,0.3); }
.reroll-icon { font-size: 1.2em; margin-right: 5px; vertical-align: middle; display: inline-block; transition: transform 0.5s ease; }
#reroll-button:hover:not(:disabled) .reroll-icon { transform: rotate(180deg); }
#close-shop-button { padding: 10px 25px; font-size: 1.1em; cursor: pointer; border: none; border-radius: 20px; color: white; font-weight: bold; transition: all 0.2s ease; text-shadow: 0px -1px 1px rgba(0,0,0,0.4); box-shadow: 0 3px 5px rgba(0,0,0,0.3); background: linear-gradient(180deg, #f0ad4e, #ec971f); margin-top: 0; }
#close-shop-button:hover { background: linear-gradient(180deg, #f3bc70, #f0a540); transform: translateY(-2px); box-shadow: 0 5px 10px rgba(236, 151, 31, 0.4); }
/* カード破棄モーダル */
.discard-modal-content { max-width: 500px; text-align: center; }
.modal h3 { margin-top: 0; color: #ffcc70; font-size: 1.5em; margin-bottom: 15px; }
.modal p { color: #ccc; margin-bottom: 20px; }
#discard-options { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 25px; }
.discard-choice-button { padding: 8px 15px; font-size: 0.9em; cursor: pointer; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 15px; background-color: rgba(255, 255, 255, 0.1); color: #eee; transition: background-color 0.2s ease, border-color 0.2s ease; }
.discard-choice-button:hover { background-color: rgba(255, 255, 255, 0.2); border-color: rgba(255, 255, 255, 0.4); }
#cancel-discard-button { background: linear-gradient(180deg, #8a94a8, #6c757d); color: white; text-shadow: 0px -1px 1px rgba(0,0,0,0.4); }
#cancel-discard-button:hover { background: linear-gradient(180deg, #9fa8b8, #7c858d); transform: translateY(-2px); box-shadow: 0 5px 10px rgba(108, 117, 125, 0.4); }

/* ダイス選択オーバーレイ */
.overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.75); display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 50; border-radius: 12px; padding: 20px; box-sizing: border-box; }
.overlay h3 { color: #ffcc70; margin-bottom: 10px; }
.overlay p { color: #eee; margin-bottom: 20px; }
.dice-choice-buttons { display: flex; flex-direction: column; gap: 10px; align-items: center; }
.dice-choice-button { font-size: 2em; padding: 10px 20px; font-family: monospace; min-width: 60px; background: linear-gradient(180deg, #ffeb3b, #ffc107); color: #333; }

/* レスポンシブ対応 (変更なし) */
@media (max-width: 1100px) { #game-screen { flex-direction: column; align-items: center; padding: 15px; } .sidebar { width: 95%; max-width: 700px; margin-bottom: 20px; align-self: auto; height: auto; } #game-container { width: 95%; margin: 0; min-height: auto; } .shop-content { max-width: 90%; } .card { width: calc(33.33% - 15px); } }
@media (max-width: 880px) { .shop-content { max-width: 95%; } .card { width: calc(50% - 15px); min-height: 260px; } }
@media (max-width: 768px) { .title-content, .result-content { padding: 30px 20px; width: 90%; } .game-title { font-size: 3em; } .difficulty-button { padding: 10px 15px; font-size: 1em; margin: 5px 3px; } #start-game-button { padding: 12px 30px; font-size: 1.2em; } #game-container { padding: 15px; } #wave-info { font-size: 1em; display: flex; flex-wrap: wrap; justify-content: center; gap: 5px 10px; margin-bottom: 10px;} #current-bet-info { font-size: 1em; margin-bottom: 10px; } #game-area { flex-direction: column; gap: 15px; } #dice-area { width: auto; max-width: none; } .player-box { width: 100%; } .player-box h2 { display: flex; align-items: center; justify-content: center; } .parent-marker { font-size: 0.7em; } #dice-display { font-size: 4em; letter-spacing: 0.1em;} .center-role { font-size: 4.5em; padding: 0.1em 0.3em; } .center-role.role-pinzoro { font-size: 5.5em; } .center-role.role-arashi { font-size: 5em; } .center-role.role-shigoro { font-size: 5em; } .center-role.role-normal-eye { font-size: 4em; } .center-role.role-hifumi { font-size: 4.5em; } .center-role.role-shonben { font-size: 3.5em; } #control-area { gap: 10px; } #bet-controls { flex-direction: column; align-items: stretch; gap: 8px; padding: 8px; } .bet-input-container { order: 1; flex-direction: row; justify-content: space-between; gap: 5px; align-items: center;} .bet-input-container label { margin-bottom: 0; } #bet-input { flex-grow: 1; min-width: 60px; width: auto; } .bet-adjust-container { order: 2; display: flex; justify-content: space-around; } .bet-action-container { order: 3; justify-content: space-around; } #game-screen.npc-parent #bet-controls .bet-action-container, #game-screen.npc-parent #bet-controls .bet-adjust-container { display: none; } #game-screen.npc-parent #bet-controls .bet-input-container { justify-content: center; } #game-screen.npc-parent #bet-controls input[type="number"] { flex-grow: 0; width: 80px; background-color: rgba(50, 50, 70, 0.7); border: 1px solid rgba(255, 255, 255, 0.1); pointer-events: none; } #action-controls { gap: 10px; flex-direction: column; align-items: stretch;} #action-controls button { width: 100%; } .result-actions { flex-direction: column; gap: 15px; } .result-actions button { width: 100%; } .sidebar { width: 95%; padding: 15px; } .sidebar h2 { font-size: 1.3em; } #left-sidebar ul, #right-sidebar dl { font-size: 0.85em; } .modal-content { width: 90%; padding: 20px; } #history-log li { font-size: 0.9em; } #history-log .details { flex-direction: column; align-items: flex-start; } #history-log .vs { display: none; } #history-log .score-change-history { text-align: left; } #history-log .parent-info { display: block; margin-left: 0; margin-top: 3px; } .roll-counter-top-right { top: 8px; right: 10px; font-size: 0.8em; } #player-hand-area { gap: 8px; margin-bottom: 10px; min-height: 30px; padding: 8px; } .hand-card-display { padding: 5px 8px; font-size: 0.8em; } .shop-content { padding: 20px; max-width: 90%; } .shop-title { font-size: 1.8em; } #player-status { flex-direction: column; align-items: stretch; gap: 10px; } #coin-display { font-size: 1.1em; text-align: center; } #shop-player-hand { text-align: center; max-width: 100%; font-size: 0.8em; } #hand-cards { justify-content: center; } .card { width: calc(50% - 15px); min-height: 260px; padding-bottom: 60px; } .card-footer { bottom: 15px; } .shop-actions { flex-direction: column; gap: 15px; align-items: stretch; } .shop-actions button { width: 100%; } }
@media (max-width: 480px) { .game-title { font-size: 2.5em; } #wave-info { font-size: 0.9em; } #dice-display { font-size: 3em; } .player-box p { font-size: 0.9em; } #bet-controls label { font-size: 0.8em; } #min-bet-display { font-size: 0.8em; } .bet-adjust-button { padding: 6px 12px; font-size: 1em; min-width: 45px;} #max-bet-button, #set-bet-button { padding: 8px 16px; font-size: 1em; } #bet-input { padding: 8px; font-size: 1em; } button { padding: 8px 15px; font-size: 0.9em; } #start-game-button { padding: 10px 25px; font-size: 1.1em; } .center-role { font-size: 3em; padding: 0.1em 0.2em; } .center-role.role-pinzoro { font-size: 3.5em; } .center-role.role-arashi { font-size: 3.3em; } .center-role.role-shigoro { font-size: 3.2em; } .center-role.role-normal-eye { font-size: 3em; } .center-role.role-hifumi { font-size: 3.1em; } .center-role.role-shonben { font-size: 2.8em; } .parent-marker { font-size: 0.6em; } .shop-content { padding: 15px; } .card { width: 100%; min-height: auto; padding-bottom: 65px; } .card-footer { bottom: 15px; } .card-name { font-size: 1.1em; } .card-description { font-size: 0.85em; } .card-cost { font-size: 1em; } .buy-button { font-size: 0.8em; padding: 5px 10px; } #close-shop-button, #reroll-button { font-size: 1em; padding: 8px 20px; } #discard-options { gap: 8px; } .discard-choice-button { font-size: 0.8em; padding: 6px 12px; } #player-hand-area { gap: 5px; min-height: auto; padding: 8px; } .hand-card-display { padding: 4px 8px; font-size: 0.75em; } .dice-choice-button { font-size: 1.5em; padding: 8px 15px; min-width: 50px;} #hand-cards { justify-content: center; } .hand-card-item { font-size: 0.8em; padding: 2px 6px; gap: 5px; } .sell-card-button { font-size: 0.7em; padding: 1px 4px; } }

/* ===== カード強化関連スタイル ===== */
.card.upgradeable { border-color: #ffeb3b; position: relative; animation: upgradePulse 1.8s infinite ease-in-out; }
.card.upgradeable:not(.sold-out):hover { box-shadow: 0 0 25px rgba(255, 235, 59, 0.6), inset 0 0 12px rgba(255, 235, 59, 0.25), 5px 10px 15px rgba(0, 0, 0, 0.5); }
@keyframes upgradePulse { 0%, 100% { transform: scale(1); border-width: 1px; box-shadow: 0 0 12px rgba(255, 235, 59, 0.4), inset 0 0 6px rgba(255, 235, 59, 0.15), 3px 3px 8px rgba(0, 0, 0, 0.4); } 50% { transform: scale(1.025); border-width: 2px; box-shadow: 0 0 20px rgba(255, 235, 59, 0.7), inset 0 0 10px rgba(255, 235, 59, 0.3), 4px 6px 12px rgba(0, 0, 0, 0.45); } }
.card.upgradeable-lv3 { border-color: #ff8c00; animation: upgradePulseLv3 1.5s infinite ease-in-out; }
.card.upgradeable-lv3:not(.sold-out):hover { box-shadow: 0 0 30px rgba(255, 140, 0, 0.7), inset 0 0 15px rgba(255, 140, 0, 0.3), 5px 10px 15px rgba(0, 0, 0, 0.5); }
@keyframes upgradePulseLv3 { 0%, 100% { transform: scale(1) rotate(0deg); border-width: 2px; box-shadow: 0 0 15px rgba(255, 140, 0, 0.5), inset 0 0 8px rgba(255, 140, 0, 0.2), 3px 3px 8px rgba(0, 0, 0, 0.4); } 50% { transform: scale(1.04) rotate(2deg); border-width: 3px; box-shadow: 0 0 25px rgba(255, 140, 0, 0.8), inset 0 0 12px rgba(255, 140, 0, 0.4), 5px 8px 15px rgba(0, 0, 0, 0.5); } }
.card .card-level { display: block; font-size: 0.8em; color: #ffcc70; font-weight: normal; }
.card-level-value-2 { color: #90ee90; text-shadow: 0 0 3px #28a745; font-weight: bold;}
.card-level-value-3 { color: #ff8c00; text-shadow: 0 0 5px #ffeb3b; font-weight: bold;}
.upgrade-button { background: linear-gradient(180deg, #90ee90, #28a745); color: #333; }
.upgrade-button:hover:not(:disabled) { background: linear-gradient(180deg, #a0f0a0, #30c050); transform: translateY(-2px); box-shadow: 0 4px 8px rgba(40, 167, 69, 0.4); }
.card.upgradeable.max-level { filter: grayscale(50%); border-color: #aaa; box-shadow: inset 0 0 10px rgba(0,0,0,0.4), 3px 3px 8px rgba(0, 0, 0, 0.4); animation: none; }
.card.upgradeable.max-level .upgrade-button { display: none; }
.card.upgradeable.max-level .card-cost { color: #aaa; font-style: italic; font-weight: normal; background-color: rgba(50, 50, 50, 0.4); border-color: rgba(150, 150, 150, 0.4); }
.card.upgradeable.max-level .card-cost::after { display: none; }

/* 売り切れステッカー風スタイル */
.card.sold-out { opacity: 0.55; pointer-events: none; position: relative; box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.4), inset 0 0 5px rgba(0,0,0,0.2); animation: none; border-color: rgba(255, 255, 255, 0.15); }
.card.sold-out::after { content: "SOLD OUT"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-15deg) scale(1.1); background-color: rgba(220, 53, 69, 0.9); color: white; padding: 10px 18px; font-size: 1.3em; font-weight: bold; border-radius: 8px; z-index: 10; text-shadow: 2px 2px 3px rgba(0,0,0,0.6); box-shadow: 3px 3px 7px rgba(0,0,0,0.4); white-space: nowrap; border: 2px solid rgba(255, 255, 255, 0.5); }
.card.sold-out .card-footer { display: none; }